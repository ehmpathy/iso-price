# roadmap = iso-price

execution roadmap for the iso-price blueprint.

---

## ⚠️ NO BACKWARDS COMPATIBILITY

**this is a complete replacement, not an incremental upgrade.**

- the old `Price` interface is **deleted** — not deprecated
- the old `Currency` enum is **deleted** — not deprecated
- the old functions (`isAPrice`, `asPriceWord`, `ofPriceWord`) are **deleted** — not deprecated
- there is **no shim**, **no re-export**, **no compatibility layer**
- the package is **renamed** — `iso-price` → `iso-price`

**step.0 rips out all old code first.** the codebase will not compile until step.1+ adds the new implementation.

---

## context

- **wish**: `0.wish.md`
- **vision**: `1.vision.md`
- **criteria**: `2.criteria.blackbox.md`, `2.criteria.blueprint.md`
- **distill**: `3.2.distill.domain._.v1.i1.md`
- **blueprint**: `3.3.blueprint.v1.i1.md`

---

## legend

- `[ ]` = todo
- `[~]` = in progress
- `[x]` = complete
- `[!]` = blocked

---

## step.0: delete old code and rename package

**rip out all old code first.** delete the old interface, enum, and functions entirely.

this step intentionally breaks the build. subsequent steps add the new implementation.

### dependencies

- none (first step)

### tasks

- [ ] s0.1: **DELETE** `src/domain.objects/Price.ts` — remove old interface entirely
- [ ] s0.2: **DELETE** `src/domain.objects/Currency.ts` — remove old enum entirely
- [ ] s0.3: **DELETE** all old functions (`isAPrice`, `asPriceWord`, `ofPriceWord`, etc.)
- [ ] s0.4: **DELETE** all old tests for deleted code
- [ ] s0.5: **DELETE** all old exports from `src/index.ts` and `src/contract/index.ts`
- [ ] s0.6: update `package.json` name to `iso-price`
- [ ] s0.7: sedreplace `iso-price` → `iso-price` in any leftover references

### acceptance criteria

| criterion | description                                                                |
| --------- | -------------------------------------------------------------------------- |
| ac.0.1    | `src/domain.objects/Price.ts` **does not exist**                           |
| ac.0.2    | `src/domain.objects/Currency.ts` **does not exist**                        |
| ac.0.3    | no occurrences of `isAPrice`, `asPriceWord`, `ofPriceWord` in codebase     |
| ac.0.4    | no occurrences of `interface Price` or `enum Currency` in codebase         |
| ac.0.5    | `package.json` has `"name": "iso-price"`                                   |
| ac.0.6    | no occurrences of `iso-price` in codebase (except git history) |

### verification

```sh
# ac.0.1: old Price.ts deleted
test ! -f src/domain.objects/Price.ts && echo "PASS: Price.ts deleted"
# expect: PASS

# ac.0.2: old Currency.ts deleted
test ! -f src/domain.objects/Currency.ts && echo "PASS: Currency.ts deleted"
# expect: PASS

# ac.0.3: no old functions
grep -rE "(isAPrice|asPriceWord|ofPriceWord)" --include="*.ts" src/
# expect: no matches

# ac.0.4: no old interface/enum
grep -rE "(interface Price|enum Currency)" --include="*.ts" src/
# expect: no matches

# ac.0.5: package name
cat package.json | jq -r '.name'
# expect: iso-price

# ac.0.6: no old package name
grep -r "iso-price" --include="*.ts" --include="*.json" src/
# expect: no matches

# NOTE: build will FAIL after this step — that is expected
# npm run build
# expect: exit 1 (no exports yet)
```

---

## step.1: enums and constants

implement enums before types that depend on them.

### dependencies

- s0 (package rename complete)

### tasks

- [ ] s1.1: create `src/domain.objects/IsoPriceExponent.ts` — enum with 6 values
- [ ] s1.2: create `src/domain.objects/IsoPriceRoundMode.ts` — enum with 5 values
- [ ] s1.3: create `src/domain.objects/IsoCurrency.ts` — enum with 25 values
- [ ] s1.4: create unit tests for each enum

### acceptance criteria

| criterion | description                                                                                                                      |
| --------- | -------------------------------------------------------------------------------------------------------------------------------- |
| ac.1.1    | `IsoPriceExponent` enum has values: `whole.x10^0`, `centi.x10^-2`, `milli.x10^-3`, `micro.x10^-6`, `nano.x10^-9`, `pico.x10^-12` |
| ac.1.2    | `IsoPriceRoundMode` enum has values: `floor`, `ceil`, `half-up`, `half-down`, `half-even`                                        |
| ac.1.3    | `IsoCurrency` enum has 25 currencies (top 21 by trade + 4 with 3-decimal exponent)                                               |
| ac.1.4    | all enums are iterable via `Object.values()`                                                                                     |

### verification

```sh
# unit tests
npm run test:unit -- IsoPriceExponent.test.ts
npm run test:unit -- IsoPriceRoundMode.test.ts
npm run test:unit -- IsoCurrency.test.ts
# expect: all pass

# types pass
npm run test:types
# expect: exit 0
```

---

## step.2: domain object types

implement the core type definitions.

### dependencies

- s1 (enums complete)

### tasks

- [ ] s2.1: create `src/domain.objects/IsoPriceWords.ts` — branded template literal via `AsOfGlossary`
- [ ] s2.2: create `src/domain.objects/IsoPriceHuman.ts` — branded string via `AsOfGlossary`
- [ ] s2.3: create `src/domain.objects/IsoPriceShape.ts` — DomainLiteral with `{ amount: bigint, currency, exponent? }`
- [ ] s2.4: create `src/domain.objects/IsoPrice.ts` — union type of Words | Shape | Human
- [ ] s2.5: create unit tests for type assignability

### acceptance criteria

| criterion | description                                                               |
| --------- | ------------------------------------------------------------------------- |
| ac.2.1    | `IsoPriceWords<TCurrency>` accepts `'USD 50.37'` when `TCurrency = 'USD'` |
| ac.2.2    | `IsoPriceWords<'USD'>` rejects `'EUR 50.37'` at compile time              |
| ac.2.3    | `IsoPriceShape` requires `amount: bigint`, not `number`                   |
| ac.2.4    | `IsoPriceShape<TCurrency, TExponent>` constrains both parameters          |
| ac.2.5    | `IsoPrice` union accepts any of the three variants                        |

### verification

```sh
# unit tests
npm run test:unit -- IsoPriceWords.test.ts
npm run test:unit -- IsoPriceHuman.test.ts
npm run test:unit -- IsoPriceShape.test.ts
npm run test:unit -- IsoPrice.test.ts
# expect: all pass

# types pass
npm run test:types
# expect: exit 0
```

---

## step.3: type guards

implement runtime type check functions.

### dependencies

- s2 (domain object types complete)

### tasks

- [ ] s3.1: create `src/domain.operations/guard/isIsoPriceWords.ts` — type guard + `.assure()` method
- [ ] s3.2: create `src/domain.operations/guard/isIsoPriceShape.ts` — type guard for shape validation
- [ ] s3.3: create `src/domain.operations/guard/isIsoPriceHuman.ts` — type guard for symbol format
- [ ] s3.4: create `src/domain.operations/guard/isIsoPrice.ts` — union type guard
- [ ] s3.5: create unit tests with data-driven caselists (c.1, c.1b, c.2 from criteria)

### acceptance criteria

| criterion | description                                                                        |
| --------- | ---------------------------------------------------------------------------------- |
| ac.3.1    | `isIsoPriceWords('USD 50.37')` returns `true`                                      |
| ac.3.2    | `isIsoPriceWords('USD 1_000_000.00')` returns `true` (underscore separators valid) |
| ac.3.3    | `isIsoPriceWords('USD 1,000,000.00')` returns `false` (commas not valid in words)  |
| ac.3.4    | `isIsoPriceWords('$50.37')` returns `false` (symbols not allowed in words)         |
| ac.3.5    | `isIsoPriceHuman('$50.37')` returns `true`                                         |
| ac.3.6    | `isIsoPriceHuman('USD 50.37')` returns `false` (code-prefix is words, not human)   |
| ac.3.7    | `isIsoPriceShape({ amount: 5037n, currency: 'USD' })` returns `true`               |
| ac.3.8    | `isIsoPrice` returns `true` for any of the three variants                          |
| ac.3.9    | `isIsoPriceWords.assure('invalid')` throws `BadRequestError`                       |

### verification

```sh
# unit tests
npm run test:unit -- isIsoPriceWords.test.ts
npm run test:unit -- isIsoPriceShape.test.ts
npm run test:unit -- isIsoPriceHuman.test.ts
npm run test:unit -- isIsoPrice.test.ts
# expect: all pass
```

---

## step.4: cast functions

implement format conversion functions.

### dependencies

- s3 (type guards complete)

### tasks

- [ ] s4.1: create `src/domain.operations/cast/asIsoPriceShape.ts` — convert any IsoPrice to shape
- [ ] s4.2: create `src/domain.operations/cast/asIsoPriceWords.ts` — convert any IsoPrice to words
- [ ] s4.3: create `src/domain.operations/cast/asIsoPriceHuman.ts` — convert any IsoPrice to symbol format
- [ ] s4.4: create `src/domain.operations/cast/asIsoPrice.ts` — normalize any input to IsoPriceWords
- [ ] s4.5: create unit tests with data-driven caselists (c.3, c.12, c.13, c.14, c.15 from criteria)

### acceptance criteria

| criterion | description                                                                                                         |
| --------- | ------------------------------------------------------------------------------------------------------------------- |
| ac.4.1    | `asIsoPrice('$50.37')` returns `'USD 50.37'`                                                                        |
| ac.4.2    | `asIsoPrice('$50.37', { currency: 'CAD' })` returns `'CAD 50.37'`                                                   |
| ac.4.3    | `asIsoPrice('€50.37', { currency: 'USD' })` throws error (symbol/currency mismatch)                                 |
| ac.4.4    | `asIsoPrice('USD 1,000,000.00')` returns `'USD 1_000_000.00'` (commas normalized to underscores)                    |
| ac.4.5    | `asIsoPriceShape('USD 50.37')` returns `{ amount: 5037n, currency: 'USD' }`                                         |
| ac.4.6    | `asIsoPriceShape({ amount: 5037, currency: 'USD' })` returns `{ amount: 5037n, currency: 'USD' }` (number → bigint) |
| ac.4.7    | `asIsoPriceWords({ amount: 5037n, currency: 'USD' })` returns `'USD 50.37'`                                         |
| ac.4.8    | `asIsoPriceHuman('USD 50.37')` returns `'$50.37'`                                                                   |
| ac.4.9    | `asIsoPriceHuman('USD 1_000_000.00')` returns `'$1,000,000.00'` (locale commas)                                     |

### verification

```sh
# unit tests
npm run test:unit -- asIsoPriceShape.test.ts
npm run test:unit -- asIsoPriceWords.test.ts
npm run test:unit -- asIsoPriceHuman.test.ts
npm run test:unit -- asIsoPrice.test.ts
# expect: all pass
```

---

## step.5: precision operations

implement exponent and round operations.

### dependencies

- s4 (cast functions complete)

### tasks

- [ ] s5.1: create `src/domain.operations/precision/getIsoPriceExponentByCurrency.ts` — lookup standard exponent
- [ ] s5.2: create `src/domain.operations/precision/setPricePrecision.ts` — change precision with round mode
- [ ] s5.3: create `src/domain.operations/precision/roundPrice.ts` — semantic alias for precision decrease
- [ ] s5.4: create unit tests with data-driven caselists (c.9, c.10, c.11 from criteria)

### acceptance criteria

| criterion | description                                                                                                 |
| --------- | ----------------------------------------------------------------------------------------------------------- |
| ac.5.1    | `getIsoPriceExponentByCurrency('USD')` returns `'centi.x10^-2'`                                             |
| ac.5.2    | `getIsoPriceExponentByCurrency('JPY')` returns `'whole.x10^0'`                                              |
| ac.5.3    | `getIsoPriceExponentByCurrency('BHD')` returns `'milli.x10^-3'`                                             |
| ac.5.4    | `getIsoPriceExponentByCurrency('BTC')` returns `'centi.x10^-2'` (default for unknown)                       |
| ac.5.5    | `setPricePrecision({ of: 'USD 50.37', to: 'micro.x10^-6' })` returns `'USD 50.370_000'` (lossless increase) |
| ac.5.6    | `setPricePrecision({ of: 'USD 5.555', to: 'centi.x10^-2' })` returns `'USD 5.56'` (default half-up)         |
| ac.5.7    | `setPricePrecision({ of: 'USD 5.555', to: 'centi.x10^-2' }, { round: 'floor' })` returns `'USD 5.55'`       |
| ac.5.8    | `roundPrice({ of: 'USD 50.375', to: 'centi.x10^-2' })` returns `'USD 50.38'`                                |

### verification

```sh
# unit tests
npm run test:unit -- getIsoPriceExponentByCurrency.test.ts
npm run test:unit -- setPricePrecision.test.ts
npm run test:unit -- roundPrice.test.ts
# expect: all pass
```

---

## step.6: arithmetic operations — sum and sub

implement addition and subtraction.

### dependencies

- s5 (precision operations complete)

### tasks

- [ ] s6.1: create `src/domain.operations/arithmetic/sumPrices.ts` — sum prices with spread + array syntax
- [ ] s6.2: export alias `addPrices` for `sumPrices`
- [ ] s6.3: create `src/domain.operations/arithmetic/subPrices.ts` — subtract prices
- [ ] s6.4: create unit tests with data-driven caselists (c.4, c.5 from criteria)

### acceptance criteria

| criterion | description                                                                                               |
| --------- | --------------------------------------------------------------------------------------------------------- |
| ac.6.1    | `sumPrices('USD 10.00', 'USD 20.00')` returns `'USD 30.00'` (spread syntax)                               |
| ac.6.2    | `sumPrices(['USD 10.00', 'USD 20.00'])` returns `'USD 30.00'` (array syntax)                              |
| ac.6.3    | `sumPrices(['USD 10.00', 'USD 20.00'], { format: 'shape' })` returns `{ amount: 3000n, currency: 'USD' }` |
| ac.6.4    | `sumPrices('USD 50.37', 'USD 0.000005')` returns `'USD 50.370005'` (mixed precision)                      |
| ac.6.5    | `sumPrices('USD 10.00', 'EUR 20.00')` throws error (currency mismatch)                                    |
| ac.6.6    | `addPrices('USD 10.00', 'USD 20.00')` returns `'USD 30.00'` (alias)                                       |
| ac.6.7    | `subPrices('USD 50.00', 'USD 20.00')` returns `'USD 30.00'`                                               |
| ac.6.8    | `subPrices('USD 10.00', 'USD 50.00')` returns `'USD -40.00'` (negative allowed)                           |

### verification

```sh
# unit tests
npm run test:unit -- sumPrices.test.ts
npm run test:unit -- subPrices.test.ts
# expect: all pass
```

---

## step.7: arithmetic operations — multiply and divide

implement scalar multiplication and division.

### dependencies

- s6 (sum/sub complete)

### tasks

- [ ] s7.1: create `src/domain.operations/arithmetic/multiplyPrice.ts` — multiply by scalar
- [ ] s7.2: create `src/domain.operations/arithmetic/dividePrice.ts` — divide by scalar
- [ ] s7.3: create unit tests with data-driven caselists (c.6, c.7 from criteria)

### acceptance criteria

| criterion | description                                                                                                   |
| --------- | ------------------------------------------------------------------------------------------------------------- |
| ac.7.1    | `multiplyPrice({ of: 'USD 10.00', by: 3 })` returns `'USD 30.00'`                                             |
| ac.7.2    | `multiplyPrice({ of: 'USD 100.00', by: 1.08 })` returns `'USD 108.00'` (tax markup)                           |
| ac.7.3    | `multiplyPrice({ of: 'USD 10.00', by: 0.333 })` returns `'USD 3.33'` (rounds to input precision)              |
| ac.7.4    | `multiplyPrice({ of: 'USD 10.00', by: 3 }, { format: 'shape' })` returns `{ amount: 3000n, currency: 'USD' }` |
| ac.7.5    | `dividePrice({ of: 'USD 10.00', by: 4 })` returns `'USD 2.50'`                                                |
| ac.7.6    | `dividePrice({ of: '$0.25', by: 1_000_000 })` returns `'USD 0.000_000_250'` (nano precision)                  |
| ac.7.7    | `dividePrice({ of: 'USD 10.00', by: 3 })` returns `'USD 3.33'` (rounds to input precision)                    |
| ac.7.8    | `dividePrice({ of: 'USD 10.00', by: 3 }, { round: 'ceil' })` returns `'USD 3.34'`                             |

### verification

```sh
# unit tests
npm run test:unit -- multiplyPrice.test.ts
npm run test:unit -- dividePrice.test.ts
# expect: all pass
```

---

## step.8: arithmetic operations — allocate

implement lossless price allocation.

### dependencies

- s7 (multiply/divide complete)

### tasks

- [ ] s8.1: create `src/domain.operations/arithmetic/allocatePrice.ts` — split by parts or ratios
- [ ] s8.2: implement remainder strategies: `first`, `last`, `largest`, `random`
- [ ] s8.3: create unit tests with data-driven caselists (c.8 from criteria)

### acceptance criteria

| criterion | description                                                                                                                      |
| --------- | -------------------------------------------------------------------------------------------------------------------------------- |
| ac.8.1    | `allocatePrice({ of: 'USD 10.00', into: { parts: 3 }, remainder: 'first' })` returns `['USD 3.34', 'USD 3.33', 'USD 3.33']`      |
| ac.8.2    | `allocatePrice({ of: 'USD 10.00', into: { parts: 3 }, remainder: 'last' })` returns `['USD 3.33', 'USD 3.33', 'USD 3.34']`       |
| ac.8.3    | `allocatePrice({ of: 'USD 5.00', into: { ratios: [7, 3] }, remainder: 'first' })` returns `['USD 3.50', 'USD 1.50']`             |
| ac.8.4    | `allocatePrice({ of: 'USD 100.00', into: { parts: 7 }, remainder: 'largest' })` — sum of parts equals input (lossless invariant) |
| ac.8.5    | `allocatePrice({ of: 'USD 10.00', into: { parts: 3 }, remainder: 'first' }, { format: 'shape' })` returns shape array            |

### verification

```sh
# unit tests
npm run test:unit -- allocatePrice.test.ts
# expect: all pass

# lossless invariant test
# sum of allocated parts must equal original input for all test cases
```

---

## step.9: statistics

implement statistical operations.

### dependencies

- s6 (sum complete — needed for internal computation)

### tasks

- [ ] s9.1: create `src/domain.operations/statistics/calcPriceStdev.ts` — standard deviation
- [ ] s9.2: create unit tests with data-driven caselists (c.16 from criteria)

### acceptance criteria

| criterion | description                                                                                  |
| --------- | -------------------------------------------------------------------------------------------- |
| ac.9.1    | `calcPriceStdev('USD 10.00', 'USD 20.00', 'USD 30.00')` returns `'USD 8.16'`                 |
| ac.9.2    | `calcPriceStdev('USD 5.00', 'USD 5.00', 'USD 5.00')` returns `'USD 0.00'` (no variance)      |
| ac.9.3    | `calcPriceStdev([])` returns `null` (empty input)                                            |
| ac.9.4    | `calcPriceStdev(['USD 10.00', 'USD 20.00', 'USD 30.00'], { format: 'shape' })` returns shape |

### verification

```sh
# unit tests
npm run test:unit -- calcPriceStdev.test.ts
# expect: all pass
```

---

## step.10: exports and contract

finalize public api surface.

### dependencies

- s1-s9 (all domain objects and operations complete)

### tasks

- [ ] s10.1: create `src/contract/index.ts` — export all domain objects and operations
- [ ] s10.2: update `src/index.ts` — re-export from contract
- [ ] s10.3: verify all exports match blueprint checklist

### acceptance criteria

| criterion | description                                                                                                    |
| --------- | -------------------------------------------------------------------------------------------------------------- |
| ac.10.1   | `import { IsoPriceShape, IsoPriceWords, IsoPriceHuman, IsoPrice } from 'iso-price'` works                      |
| ac.10.2   | `import { IsoPriceExponent, IsoPriceRoundMode, IsoCurrency } from 'iso-price'` works                           |
| ac.10.3   | `import { isIsoPrice, isIsoPriceWords, isIsoPriceShape, isIsoPriceHuman } from 'iso-price'` works              |
| ac.10.4   | `import { asIsoPrice, asIsoPriceWords, asIsoPriceShape, asIsoPriceHuman } from 'iso-price'` works              |
| ac.10.5   | `import { sumPrices, addPrices, subPrices, multiplyPrice, dividePrice, allocatePrice } from 'iso-price'` works |
| ac.10.6   | `import { setPricePrecision, roundPrice, getIsoPriceExponentByCurrency } from 'iso-price'` works               |
| ac.10.7   | `import { calcPriceStdev } from 'iso-price'` works                                                             |

### verification

```sh
# build passes
npm run build
# expect: exit 0

# type check all exports
npm run test:types
# expect: exit 0

# verify export list matches blueprint
grep -E "^export" src/contract/index.ts | wc -l
# expect: ~25+ exports
```

---

## step.11: acceptance tests

blackbox acceptance tests for vision.experience.1 (llm cost track flow).

### dependencies

- s10 (all exports complete)

### tasks

- [ ] s11.1: create `src/__test_assets__/fixtures/llmCostTrack.fixture.ts` — test fixture
- [ ] s11.2: create `src/contract/index.acceptance.test.ts` — full e2e test
- [ ] s11.3: implement all acceptance test cases from blueprint p8

### acceptance criteria

| criterion | description                                                                                                                           |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------- |
| ac.11.1   | `dividePrice({ of: '$0.25', by: 1_000_000 })` returns `'USD 0.000_000_250'` (per-token rate)                                          |
| ac.11.2   | `multiplyPrice({ of: inputRate, by: 47_382 })` returns `'USD 0.011_845_500'` (token cost)                                             |
| ac.11.3   | `sumPrices(['USD 0.011_845_500', 'USD 47.370_001_970'])` returns `'USD 47.381_847_470'` (accumulate)                                  |
| ac.11.4   | `multiplyPrice({ of: subtotal, by: 1.01 })` returns `'USD 47.855_665_944'` (1% markup)                                                |
| ac.11.5   | `roundPrice({ of: withMarkup, to: 'centi.x10^-2' }, { format: 'shape' })` returns `{ amount: 4786n, currency: 'USD' }` (stripe-ready) |
| ac.11.6   | shape provides integer cents for stripe integration                                                                                   |

### verification

```sh
# acceptance tests
npm run test:acceptance -- index.acceptance.test.ts
# expect: all pass

# full test suite
npm run test
# expect: all pass
```

---

## step.12: final verification

complete verification of all criteria.

### dependencies

- s11 (acceptance tests complete)

### tasks

- [ ] s12.1: run full test suite
- [ ] s12.2: verify build output
- [ ] s12.3: verify type coverage
- [ ] s12.4: verify no lint errors

### acceptance criteria

| criterion | description                                                     |
| --------- | --------------------------------------------------------------- |
| ac.12.1   | `npm run test` passes (all unit, integration, acceptance tests) |
| ac.12.2   | `npm run build` succeeds                                        |
| ac.12.3   | `npm run test:types` passes                                     |
| ac.12.4   | `npm run test:lint` passes                                      |
| ac.12.5   | `npm run test:format` passes                                    |

### verification

```sh
# full verification
npm run build && npm run test:types && npm run test:lint && npm run test:format && npm run test
# expect: all pass

# optional: thorough mode
THOROUGH=true npm run test
# expect: all pass
```

---

## dependency graph

```
s0 (rename)
  │
  v
s1 (enums)
  │
  v
s2 (domain types)
  │
  v
s3 (type guards)
  │
  v
s4 (cast functions)
  │
  v
s5 (precision)
  │
  ├─────────────────┐
  v                 v
s6 (sum/sub)      s9 (statistics)
  │
  v
s7 (multiply/divide)
  │
  v
s8 (allocate)
  │
  v
s10 (exports)
  │
  v
s11 (acceptance)
  │
  v
s12 (final)
```

---

## criteria coverage matrix

| criteria                      | step   | verification                                                  |
| ----------------------------- | ------ | ------------------------------------------------------------- |
| c.1 format.words              | s3     | `isIsoPriceWords.test.ts`                                     |
| c.1b format.human             | s3     | `isIsoPriceHuman.test.ts`                                     |
| c.2 format.shape              | s3     | `isIsoPriceShape.test.ts`                                     |
| c.2b format.shape.constraints | s2     | `IsoPriceShape.test.ts`                                       |
| c.3 cast                      | s4     | `asIsoPrice*.test.ts`                                         |
| c.4 arithmetic.sum            | s6     | `sumPrices.test.ts`                                           |
| c.5 arithmetic.sub            | s6     | `subPrices.test.ts`                                           |
| c.6 arithmetic.mul            | s7     | `multiplyPrice.test.ts`                                       |
| c.7 arithmetic.div            | s7     | `dividePrice.test.ts`                                         |
| c.8 arithmetic.allocate       | s8     | `allocatePrice.test.ts`                                       |
| c.9 precision.change          | s5     | `setPricePrecision.test.ts`                                   |
| c.10 precision.round          | s5     | `roundPrice.test.ts`                                          |
| c.11 precision.roundPrice     | s5     | `roundPrice.test.ts`                                          |
| c.12 amount.bigint            | s4     | `asIsoPriceShape.test.ts`                                     |
| c.13 serialize                | s4     | `asIsoPriceWords.test.ts`                                     |
| c.14 currency.iso4217         | s4, s5 | `asIsoPrice.test.ts`, `getIsoPriceExponentByCurrency.test.ts` |
| c.15 currency.custom          | s4     | `asIsoPrice.test.ts`                                          |
| c.16 statistics               | s9     | `calcPriceStdev.test.ts`                                      |
| c.17 currency.constraint      | s2     | `IsoPriceWords.test.ts`                                       |
| vision.experience.1           | s11    | `index.acceptance.test.ts`                                    |

---

## execution summary

| step      | phase | description          | est. tasks |
| --------- | ----- | -------------------- | ---------- |
| s0        | p0    | package rename       | 4          |
| s1        | p1    | enums and constants  | 4          |
| s2        | p1    | domain object types  | 5          |
| s3        | p2    | type guards          | 5          |
| s4        | p3    | cast functions       | 5          |
| s5        | p4    | precision operations | 4          |
| s6        | p5    | sum and sub          | 4          |
| s7        | p5    | multiply and divide  | 3          |
| s8        | p5    | allocate             | 3          |
| s9        | p6    | statistics           | 2          |
| s10       | p7    | exports and contract | 3          |
| s11       | p8    | acceptance tests     | 3          |
| s12       | -     | final verification   | 4          |
| **total** |       |                      | **49**     |
